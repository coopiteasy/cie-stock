==============================
Stock Realign Moves and Quants
==============================

.. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
    :target: https://odoo-community.org/page/development-status
    :alt: Beta
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-coopiteasy%2Fcie--stock-lightgray.png?logo=github
    :target: https://github.com/coopiteasy/cie-stock/tree/12.0/stock_realign_move_and_quants
    :alt: coopiteasy/cie-stock

|badge1| |badge2| |badge3| 

A bug in Odoo 12 leads to the desynchronisation of the stock
quants and the stock move lines. The root cause has yet to be found.
This modules fixes the symptoms and not the cause. It aims to
1. Realign the stock quants and the stock move lines
2. Correct on the fly future desynchronisation

To do that, we assume the source of truth are the move lines rather than
the quants.

More information on this issue: https://github.com/odoo/odoo/issues/62139

**Table of contents**

.. contents::
   :local:

Usage
=====

This module adds a wizard in the menu

  Inventory > Configuration > Align Stock Moves and Quants

This wizard is only accessible to admin user.

In this wizard, enter the date from which you want to fix the alignement.
Good dates are the first ever move (default) or the switch to Odoo 12.

Upon validation, the wizard

- computes the stock based on the stock move lines,
- fixes the quants with that value (cf server logs),
- opens an inventory with all the fixed product.

Both columns, theoretical quantity and verified quantity display the same
value. This is normal, theoretical quantity is based on the new fixed
quants and verified quantity is set by the wizard based on the moves.

This is a good time to make an actual inventory on those product and
fix the values in the inventory.

Finally, click on validate to finish the process.

This module also adds a fix to quant to prevent blocking the pickings
in the future.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/coopiteasy/cie-stock/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us smashing it by providing a detailed and welcomed
`feedback <https://github.com/coopiteasy/cie-stock/issues/new?body=module:%20stock_realign_move_and_quants%0Aversion:%2012.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
~~~~~~~

* Camptocamp

Contributors
~~~~~~~~~~~~

* `Camptocamp <https://www.camptocamp.com/en>`_:

  * Alexandre Fayolle (actual fix)

* `ForgeFlow, S.L. <https://www.forgeflow.com>`_
* `Coop IT Easy SCRLfs <https://coopiteasy.be>`_:

  * Robin Keunen (wrapping)

Maintainers
~~~~~~~~~~~

This module is part of the `coopiteasy/cie-stock <https://github.com/coopiteasy/cie-stock/tree/12.0/stock_realign_move_and_quants>`_ project on GitHub.

You are welcome to contribute.
